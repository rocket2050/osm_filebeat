---
- name: Ensure dependency is installed (Ubuntu).
  apt: 
    deb: https://artifacts.elastic.co/downloads/beats/filebeat/filebeat-5.6.3-amd64.deb
    state: present

- name: To create Directory
  file: path=/etc/filebeat/conf.d state=directory

- name: To setup filebeat
  template:
    src: filebeat.yml.j2
    dest: /etc/filebeat/filebeat.yml

- name: To start and enable Filebeat
  service:
    name: filebeat
    state: started
    enabled: true

- name: To add Kibana Dashboard
  shell: /usr/share/filebeat/scripts/import_dashboards -only-index 
  